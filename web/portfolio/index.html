<!DOCTYPE html>
<html lang="es" data-bs-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mi Portafolio - DuocPoint</title>
  <link rel="manifest" href="/manifest.webmanifest">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="portfolio.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
  <meta name="theme-color" content="#2B0A3D">
</head>
<body>
  <!-- Navbar copiada exactamente de foro -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container">
    <a class="navbar-brand" href="../index.html">
      <i class="fas fa-graduation-cap me-2"></i>DuocPoint
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link" href="../index.html">Inicio</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../forum/index.html">Foro</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../market/index.html">Mercado</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="index.html">Portafolio</a>
        </li>
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown">
            <i class="fas fa-user me-1"></i>Usuario
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#" id="moderationLink" style="display: none;">
              <i class="fas fa-shield-alt me-2"></i>Moderación
            </a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#" onclick="logout()">
              <i class="fas fa-sign-out-alt me-2"></i>Cerrar Sesión
            </a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Header secundario con acciones -->
<div class="container-fluid py-3 d-flex justify-content-between align-items-center" style="background: var(--brand-purple, #2B0A3D); margin-top: 0;">
  <h1 class="h4 m-0 text-brand d-flex align-items-center gap-2">
    <i class="bi bi-file-earmark-person"></i> Mi Portafolio
  </h1>
  <div class="btn-group" role="group" aria-label="Acciones de portafolio">
    <button class="btn btn-brand" id="btnGenerarPDF" type="button">
      <i class="bi bi-file-earmark-pdf"></i> Generar PDF
    </button>
    <button class="btn btn-outline-light" id="btnSugerencias" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSugerencias" aria-controls="offcanvasSugerencias">
      <i class="bi bi-lightbulb"></i> Sugerencias
    </button>
    <button class="btn btn-outline-light" id="btnConfigurar" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasConfigurar" aria-controls="offcanvasConfigurar">
      <i class="bi bi-gear"></i> Configurar
    </button>
  </div>
</div>

  <!-- Agrega mt-5 al main container para evitar que los botones queden tapados -->
  <main class="container-fluid py-4 mt-5">
    <div class="row g-4">
      <!-- Columna principal: Tabs y formularios -->
      <div class="col-12 col-md-7 col-lg-6">
        <!-- Barra de completitud -->
        <div class="mb-4">
          <label for="progressCompletitud" class="form-label fw-bold">Completitud del Portafolio <span id="completitudPorcentaje" class="ms-2 badge bg-brand">0%</span></label>
          <div class="progress" style="height: 1.5rem;">
            <div class="progress-bar bg-brand" id="progressCompletitud" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div>
        <!-- Tabs Bootstrap -->
        <ul class="nav nav-tabs mb-3" id="portfolioTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="perfil-tab" data-bs-toggle="tab" data-bs-target="#perfil" type="button" role="tab" aria-controls="perfil" aria-selected="true"><i class="bi bi-person"></i> Perfil</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="logros-tab" data-bs-toggle="tab" data-bs-target="#logros" type="button" role="tab" aria-controls="logros" aria-selected="false"><i class="bi bi-trophy"></i> Logros</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="proyectos-tab" data-bs-toggle="tab" data-bs-target="#proyectos" type="button" role="tab" aria-controls="proyectos" aria-selected="false"><i class="bi bi-code-slash"></i> Proyectos</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="experiencia-tab" data-bs-toggle="tab" data-bs-target="#experiencia" type="button" role="tab" aria-controls="experiencia" aria-selected="false"><i class="bi bi-briefcase"></i> Experiencia</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="habilidades-tab" data-bs-toggle="tab" data-bs-target="#habilidades" type="button" role="tab" aria-controls="habilidades" aria-selected="false"><i class="bi bi-gear"></i> Habilidades</button>
          </li>
        </ul>
        <div class="tab-content" id="portfolioTabsContent">
          <!-- Tab Perfil -->
          <div class="tab-pane fade show active" id="perfil" role="tabpanel" aria-labelledby="perfil-tab" tabindex="0">
            <form id="formPerfil" class="needs-validation" novalidate autocomplete="off">
              <div class="row g-3">
                <div class="col-12 col-md-6">
                  <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="inputNombre" placeholder="Nombre completo" required aria-required="true">
                    <label for="inputNombre">Nombre completo *</label>
                    <div class="invalid-feedback">Campo obligatorio.</div>
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="form-floating mb-3">
                    <input type="email" class="form-control" id="inputEmail" placeholder="nombre@duocuc.cl" readonly>
                    <label for="inputEmail">Email</label>
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="inputCampus" placeholder="Campus" readonly>
                    <label for="inputCampus">Campus</label>
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="inputCarrera" placeholder="Carrera" required aria-required="true">
                    <label for="inputCarrera">Carrera *</label>
                    <div class="invalid-feedback">Campo obligatorio.</div>
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="form-floating mb-3">
                    <input type="tel" class="form-control" id="inputTelefono" placeholder="Teléfono">
                    <label for="inputTelefono">Teléfono</label>
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="form-floating mb-3">
                    <input type="url" class="form-control" id="inputLinkedin" placeholder="https://linkedin.com/in/tu-perfil">
                    <label for="inputLinkedin">LinkedIn</label>
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="form-floating mb-3">
                    <input type="url" class="form-control" id="inputGithub" placeholder="https://github.com/tu-usuario">
                    <label for="inputGithub">GitHub</label>
                  </div>
                </div>
                <div class="col-12">
                  <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="inputTituloProfesional" placeholder="Ej: Desarrollador Full Stack">
                    <label for="inputTituloProfesional">Título profesional</label>
                  </div>
                </div>
                <div class="col-12">
                  <div class="form-floating mb-3">
                    <textarea class="form-control" id="inputResumenProfesional" placeholder="Resumen profesional" style="height: 100px"></textarea>
                    <label for="inputResumenProfesional">Resumen profesional</label>
                  </div>
                </div>
                <div class="col-12 d-flex gap-3 align-items-center mb-3">
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="inputMostrarContacto" checked>
                    <label class="form-check-label" for="inputMostrarContacto">Mostrar contacto</label>
                  </div>
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="inputMostrarRedes" checked>
                    <label class="form-check-label" for="inputMostrarRedes">Mostrar redes</label>
                  </div>
                </div>
                <div class="col-12">
                  <button type="submit" class="btn btn-brand w-100 py-2">
                    <i class="bi bi-check-circle"></i> Guardar Perfil
                  </button>
                </div>
              </div>
            </form>
          </div>
          <!-- Tab Logros -->
          <div class="tab-pane fade" id="logros" role="tabpanel" aria-labelledby="logros-tab" tabindex="0">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h2 class="h5 m-0">Logros y Certificaciones</h2>
              <button class="btn btn-brand" id="btnAgregarLogro" type="button" data-bs-toggle="modal" data-bs-target="#modalLogro">
                <i class="bi bi-plus-circle"></i> Agregar
              </button>
            </div>
            <div class="input-group mb-3">
              <span class="input-group-text"><i class="bi bi-search"></i></span>
              <input type="text" class="form-control" id="filtroLogros" placeholder="Filtrar logros...">
              <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">Ordenar</button>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#" data-sort="fecha">Por fecha</a></li>
                <li><a class="dropdown-item" href="#" data-sort="tipo">Por tipo</a></li>
              </ul>
            </div>
            <div id="logrosList" class="row g-3"></div>
            <nav><ul class="pagination justify-content-center mt-3" id="paginacionLogros"></ul></nav>
          </div>
          <!-- Tab Proyectos -->
          <div class="tab-pane fade" id="proyectos" role="tabpanel" aria-labelledby="proyectos-tab" tabindex="0">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h2 class="h5 m-0">Proyectos</h2>
              <button class="btn btn-brand" id="btnAgregarProyecto" type="button" data-bs-toggle="modal" data-bs-target="#modalProyecto">
                <i class="bi bi-plus-circle"></i> Agregar
              </button>
            </div>
            <div class="input-group mb-3">
              <span class="input-group-text"><i class="bi bi-search"></i></span>
              <input type="text" class="form-control" id="filtroProyectos" placeholder="Filtrar proyectos...">
              <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">Ordenar</button>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#" data-sort="fecha">Por fecha</a></li>
                <li><a class="dropdown-item" href="#" data-sort="estado">Por estado</a></li>
              </ul>
            </div>
            <div id="proyectosList" class="row g-3"></div>
            <nav><ul class="pagination justify-content-center mt-3" id="paginacionProyectos"></ul></nav>
          </div>
          <!-- Tab Experiencia -->
          <div class="tab-pane fade" id="experiencia" role="tabpanel" aria-labelledby="experiencia-tab" tabindex="0">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h2 class="h5 m-0">Experiencia Laboral</h2>
              <button class="btn btn-brand" id="btnAgregarExperiencia" type="button" data-bs-toggle="modal" data-bs-target="#modalExperiencia">
                <i class="bi bi-plus-circle"></i> Agregar
              </button>
            </div>
            <div class="input-group mb-3">
              <span class="input-group-text"><i class="bi bi-search"></i></span>
              <input type="text" class="form-control" id="filtroExperiencia" placeholder="Filtrar experiencia...">
              <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">Ordenar</button>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#" data-sort="fecha">Por fecha</a></li>
                <li><a class="dropdown-item" href="#" data-sort="empresa">Por empresa</a></li>
              </ul>
            </div>
            <div id="experienciasList" class="row g-3"></div>
            <nav><ul class="pagination justify-content-center mt-3" id="paginacionExperiencia"></ul></nav>
          </div>
          <!-- Tab Habilidades -->
          <div class="tab-pane fade" id="habilidades" role="tabpanel" aria-labelledby="habilidades-tab" tabindex="0">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h2 class="h5 m-0">Habilidades</h2>
              <button class="btn btn-brand" id="btnAgregarHabilidad" type="button" data-bs-toggle="modal" data-bs-target="#modalHabilidad">
                <i class="bi bi-plus-circle"></i> Agregar
              </button>
            </div>
            <div class="input-group mb-3">
              <span class="input-group-text"><i class="bi bi-search"></i></span>
              <input type="text" class="form-control" id="filtroHabilidades" placeholder="Filtrar habilidades...">
              <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">Ordenar</button>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#" data-sort="nivel">Por nivel</a></li>
                <li><a class="dropdown-item" href="#" data-sort="categoria">Por categoría</a></li>
              </ul>
            </div>
            <div id="habilidadesList" class="row g-3"></div>
            <nav><ul class="pagination justify-content-center mt-3" id="paginacionHabilidades"></ul></nav>
          </div>
        </div>
      </div>
      <!-- Panel derecho: Preview del portafolio -->
      <div class="col-12 col-md-5 col-lg-6">
        <div class="card shadow-sm mb-4" id="previewPanel" tabindex="0" aria-label="Vista previa del portafolio">
          <div class="card-header bg-brand text-brand d-flex align-items-center gap-2">
            <i class="bi bi-eye"></i> Vista Previa
          </div>
          <div class="card-body bg-dark-subtle" id="previewContent">
            <!-- Aquí se renderiza el preview dinámico -->
            <div class="text-center text-muted">Completa tu perfil para ver la vista previa.</div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Modals Bootstrap para CRUD (Logros, Proyectos, Experiencia, Habilidades) -->
  <div class="modal fade" id="modalLogro" tabindex="-1" aria-labelledby="modalLogroLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <form id="formLogro" class="needs-validation" novalidate>
          <div class="modal-header">
            <h5 class="modal-title" id="modalLogroLabel">Agregar Logro</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body">
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="inputLogroTitulo" placeholder="Título" required>
              <label for="inputLogroTitulo">Título *</label>
              <div class="invalid-feedback">Campo obligatorio.</div>
            </div>
            <div class="form-floating mb-3">
              <textarea class="form-control" id="inputLogroDescripcion" placeholder="Descripción" style="height: 80px" required></textarea>
              <label for="inputLogroDescripcion">Descripción *</label>
              <div class="invalid-feedback">Campo obligatorio.</div>
            </div>
            <div class="form-floating mb-3">
              <select class="form-select" id="inputLogroTipo" required>
                <option value="">Seleccionar tipo</option>
                <option value="academico">Académico</option>
                <option value="profesional">Profesional</option>
                <option value="voluntariado">Voluntariado</option>
                <option value="deportivo">Deportivo</option>
                <option value="cultural">Cultural</option>
                <option value="otro">Otro</option>
              </select>
              <label for="inputLogroTipo">Tipo *</label>
              <div class="invalid-feedback">Campo obligatorio.</div>
            </div>
            <div class="form-floating mb-3">
              <input type="date" class="form-control" id="inputLogroFecha" placeholder="Fecha" required>
              <label for="inputLogroFecha">Fecha de obtención *</label>
              <div class="invalid-feedback">Campo obligatorio.</div>
            </div>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="inputLogroInstitucion" placeholder="Institución">
              <label for="inputLogroInstitucion">Institución</label>
            </div>
            <div class="form-floating mb-3">
              <input type="url" class="form-control" id="inputLogroCertificado" placeholder="URL del certificado">
              <label for="inputLogroCertificado">URL del certificado</label>
            </div>
            <div class="form-check mb-2">
              <input class="form-check-input" type="checkbox" id="inputLogroVisible" checked>
              <label class="form-check-label" for="inputLogroVisible">Visible en el portafolio</label>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-brand"><i class="bi bi-check-circle"></i> Guardar</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- Repetir modals para Proyectos, Experiencia, Habilidades (idéntica estructura, cambia id y campos) -->
  <!-- ... OMITIDO POR BREVEDAD ... -->

  <!-- Offcanvas Sugerencias -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasSugerencias" aria-labelledby="offcanvasSugerenciasLabel">
    <div class="offcanvas-header bg-brand text-brand">
      <h5 class="offcanvas-title" id="offcanvasSugerenciasLabel"><i class="bi bi-lightbulb"></i> Sugerencias</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
    </div>
    <div class="offcanvas-body">
      <ul class="list-group list-group-flush" id="sugerenciasList">
        <!-- Sugerencias dinámicas -->
      </ul>
    </div>
  </div>
  <!-- Offcanvas Configuración -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasConfigurar" aria-labelledby="offcanvasConfigurarLabel">
    <div class="offcanvas-header bg-brand text-brand">
      <h5 class="offcanvas-title" id="offcanvasConfigurarLabel"><i class="bi bi-gear"></i> Configuración</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
    </div>
    <div class="offcanvas-body">
      <div class="mb-3">
        <label for="inputTemaColor" class="form-label">Color de acento</label>
        <input type="color" class="form-control form-control-color" id="inputTemaColor" value="#FFD200" title="Elige color de acento">
      </div>
      <div class="form-check form-switch mb-2">
        <input class="form-check-input" type="checkbox" id="switchDarkMode" checked>
        <label class="form-check-label" for="switchDarkMode">Dark Mode</label>
      </div>
      <div class="mb-2">Mostrar secciones:</div>
      <div class="form-check form-switch mb-1">
        <input class="form-check-input" type="checkbox" id="switchMostrarLogros" checked>
        <label class="form-check-label" for="switchMostrarLogros">Logros</label>
      </div>
      <div class="form-check form-switch mb-1">
        <input class="form-check-input" type="checkbox" id="switchMostrarProyectos" checked>
        <label class="form-check-label" for="switchMostrarProyectos">Proyectos</label>
      </div>
      <div class="form-check form-switch mb-1">
        <input class="form-check-input" type="checkbox" id="switchMostrarExperiencia" checked>
        <label class="form-check-label" for="switchMostrarExperiencia">Experiencia</label>
      </div>
      <div class="form-check form-switch mb-1">
        <input class="form-check-input" type="checkbox" id="switchMostrarHabilidades" checked>
        <label class="form-check-label" for="switchMostrarHabilidades">Habilidades</label>
      </div>
    </div>
  </div>

  <!-- Toast Bootstrap -->
  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="toast" class="toast align-items-center text-bg-dark border-0" role="status" aria-live="polite" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body" id="toastMessage">Acción realizada</div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Cerrar"></button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="portfolio.js"></script>
</body>
</html>
